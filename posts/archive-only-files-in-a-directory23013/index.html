<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Archive Only Files In a Directory | Gregg&#39;s MOTD</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="If you want to create a tar archive of only the files of a directory and exclude any subdirectories you can use the ls -la command and pipe the output to awk. However you need to remove the first 8 fields from the output and leave all of the remaining parts of the line in case there are spaces in the filename. One quick and dirty way of doing that is to set each of the 8 fields to a blank and then use sed to trim the leading spaces. You can optionally add quotation marks around the filename in your output too.">
    <meta name="generator" content="Hugo 0.152.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    <meta name="author" content="Gregg">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >




    


    
      

    

    

    
      <link rel="canonical" href="http://localhost:1313/posts/archive-only-files-in-a-directory23013/">
    

    
    
    <meta property="og:url" content="http://localhost:1313/posts/archive-only-files-in-a-directory23013/">
  <meta property="og:site_name" content="Gregg&#39;s MOTD">
  <meta property="og:title" content="Archive Only Files In a Directory">
  <meta property="og:description" content="If you want to create a tar archive of only the files of a directory and exclude any subdirectories you can use the ls -la command and pipe the output to awk. However you need to remove the first 8 fields from the output and leave all of the remaining parts of the line in case there are spaces in the filename. One quick and dirty way of doing that is to set each of the 8 fields to a blank and then use sed to trim the leading spaces. You can optionally add quotation marks around the filename in your output too.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-05-29T00:00:00+00:00">
    <meta property="article:modified_time" content="2023-05-29T00:00:00+00:00">
    <meta property="article:tag" content="Cli">
    <meta property="article:tag" content="Tar">
    <meta property="article:tag" content="Awk">
    <meta property="article:tag" content="Xargs">
    <meta property="article:tag" content="Sed">
    <meta property="article:tag" content="Motd">

  <meta itemprop="name" content="Archive Only Files In a Directory">
  <meta itemprop="description" content="If you want to create a tar archive of only the files of a directory and exclude any subdirectories you can use the ls -la command and pipe the output to awk. However you need to remove the first 8 fields from the output and leave all of the remaining parts of the line in case there are spaces in the filename. One quick and dirty way of doing that is to set each of the 8 fields to a blank and then use sed to trim the leading spaces. You can optionally add quotation marks around the filename in your output too.">
  <meta itemprop="datePublished" content="2023-05-29T00:00:00+00:00">
  <meta itemprop="dateModified" content="2023-05-29T00:00:00+00:00">
  <meta itemprop="wordCount" content="120">
  <meta itemprop="keywords" content="Cli,Tar,Awk,Xargs,Sed,Motd">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Archive Only Files In a Directory">
  <meta name="twitter:description" content="If you want to create a tar archive of only the files of a directory and exclude any subdirectories you can use the ls -la command and pipe the output to awk. However you need to remove the first 8 fields from the output and leave all of the remaining parts of the line in case there are spaces in the filename. One quick and dirty way of doing that is to set each of the 8 fields to a blank and then use sed to trim the leading spaces. You can optionally add quotation marks around the filename in your output too.">

	
  </head><body class="ma0 avenir bg-near-white development">

    
   
  

  <header>
    <div class="bg-black">
      <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l center items-center justify-between">
    <a href="/" class="f3 fw2 hover-white white-90 dib no-underline">
      
        Gregg&#39;s MOTD
      
    </a>
    <div class="flex-l items-center">
      

      
      <div class="ananke-socials"></div>

    </div>
  </div>
</nav>

    </div>
  </header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l mw7 center ph3 flex-wrap justify-between">
    <header class="mt4 w-100">
      <aside class="instapaper_ignoref b helvetica tracked ttu">
          
        Posts
      </aside><div id="sharing" class="mt3 ananke-socials"></div>
<h1 class="f1 athelas mt3 mb1">Archive Only Files In a Directory</h1>
      
      <p class="tracked"><strong>Gregg</strong>
      </p>
      
      
      
      <time class="f6 mv4 dib tracked" datetime="2023-05-29T00:00:00Z">May 29, 2023</time>
      

      
      
    </header>
    <div class="nested-copy-line-height lh-copy serif f4 nested-links mid-gray pr4-l w-100-l"><p>If you want to create a tar archive of only the files of a directory and exclude any subdirectories you can use the <code>ls -la</code> command and pipe the output to <code>awk</code>. However you need to remove the first 8 fields from the output and leave all of the remaining parts of the line in case there are spaces in the filename. One quick and dirty way of doing that is to set each of the 8 fields to a blank and then use <code>sed</code> to trim the leading spaces. You can optionally add quotation marks around the filename in your output too.</p>
<pre tabindex="0"><code>$ ls -al | awk &#39;$0!~/^d/ {$1=$2=$3=$4=$5=$6=$7=$8=&#34;&#34;; printf(&#34;%s\&#34;\n&#34;, $0)}&#39; | sed &#39;s/^[[:space:]]*/&#34;/&#39; | xargs tar cvf archive-name.tar
</code></pre><ul class="pa0">
  
   <li class="list di">
     <a href="/tags/cli/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Cli</a>
   </li>
  
   <li class="list di">
     <a href="/tags/tar/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Tar</a>
   </li>
  
   <li class="list di">
     <a href="/tags/awk/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Awk</a>
   </li>
  
   <li class="list di">
     <a href="/tags/xargs/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Xargs</a>
   </li>
  
   <li class="list di">
     <a href="/tags/sed/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Sed</a>
   </li>
  
   <li class="list di">
     <a href="/tags/motd/" class="link f5 grow br-pill ba ph3 pv2 mb2 dib black sans-serif no-underline">Motd</a>
   </li>
  
</ul>
<div class="mt6 instapaper_ignoref">
      
      
      </div>
    </div></article>

    </main>
    <footer class="bg-black bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="f4 fw4 hover-white white-70 dn dib-ns pv2 ph3 no-underline" href="http://localhost:1313/" >
    &copy;  Gregg's MOTD 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
