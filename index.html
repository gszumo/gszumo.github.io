<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<link rel="stylesheet" href="main.css" type="text/css" />
<link rel="stylesheet" href="blog.css" type="text/css" />
<link rel="alternate" type="application/rss+xml" title="Subscribe to this page..." href="feed.rss" />
<title>Gregg's MOTD</title>
</head><body>
<div id="divbodyholder">
<div class="headerholder"><div class="header">
<div id="title">
<h1 class="nomargin"><a class="ablack" href="http://www.szumowski.org/index.html">Gregg's MOTD</a></h1>
<div id="description">Tips & Tricks that I've Encountered Over the Years...</div>
</div></div></div>
<div id="divbody"><div class="content">
<h3><a class="ablack" href="ip-address-blocks26740.html">
IP Address Blocks
</a></h3>
<!-- bashblog_timestamp: #202309181704.44# -->
<div class="subtitle">September 18, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>There are 4 classes of IPv4 networks:</p>
<p>A <em>Class A network</em> can have 16,777,214 computers on it. It
has an IP address that starts with a number in the range 0 to 126. 127
is reserved for the local loopback. (Only 127.0.0.1 is ever used
although this may change in the future).</p>
<p>A <em>Class B</em> network can have 65,534 computers on it. It has an
IP address that starts in the range of 128 to 191.</p>
<p>A <em>Class C</em> network can have 254 computers on it. This network
is often used for many home networks and most company networks. It has
an IP address that starts with a number from 192 to 223.</p>
<p><em>Class D</em> (224–239) is used for multicast and Class E
(240–254) is reserved.</p>
<p>Within the above classes are sets of private network addresses:</p>
<ul>
<li>Any address that starts with 10</li>
<li>Any address that starts 172 and where the second number is
16–31.</li>
<li>Any address that starts with 192.168</li>
</ul>
<p>Routers will generally discard any traffic to private network
addresses. So,in order to talk to other devices, your router does
something called Network Address Translation or NATtin. You can read
more about Network Address Translation and how it works <a
href="https://www.cisco.com/c/en/us/products/routers/network-address-translation.html">here</a>.</p>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_networks.html'>networks</a>, <a href='tag_ip-address.html'>ip-address</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="vim-more-copying-tips32632.html">
Vim: More Copying Tips
</a></h3>
<!-- bashblog_timestamp: #202309171115.09# -->
<div class="subtitle">September 17, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>Blocks of lines can be copied in <em>Vim</em> using <em>ranges</em>,
i.e., two numbers separated by a comma indicating the start and end of
the block of lines.</p>
<p><strong>Some Examples</strong></p>
<p>To copy line 20-25, use:</p>
<blockquote>
<p><code>:20,25yank</code><br/></p>
</blockquote>
<p>To copy five lines just above the cursor:</p>
<blockquote>
<p><code>:-4,.yank</code><br/></p>
</blockquote>
<p>where the period (.) indicates the current line.</p>
<p>To copy five lines just below the cursor:</p>
<blockquote>
<p><code>:.,+4yank</code><br/></p>
</blockquote>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_vim.html'>vim</a>, <a href='tag_copy.html'>copy</a>, <a href='tag_ranges.html'>ranges</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="log-file-maintenance-and-cleanup.html">
Log File Maintenance and Cleanup
</a></h3>
<!-- bashblog_timestamp: #202309161920.08# -->
<div class="subtitle">September 16, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>Log files sometimes take up a lot of disk space. Some applications
have internal processes that run periodically to manage them and some do
not. Often, this becomes a problems after a while as the logs consume
all of your partition space.</p>
<p>You can manage these files yourself with a simple script running in a
<em>cronjob</em> (or systemd timers if you’re so inclined) if they have
a common naming convention and you have the proper access.</p>
<p>Let’s say you have an application called <em>myapp</em> that keeps
it’s logs in a directory called <code>/opt/myapp/logs</code> and those
files all end with a <code>.log</code> file extension.</p>
<blockquote>
<p><code>cat &gt;logmanage.sh &lt;&lt;"EOF"</code><br/>
<code>#!/bin/sh</code><br/> <code>LOGDIR="/opt/myapp/logs"</code><br/>
<code># Compress all of the files older than a day</code><br/>
<code>find ${LOGDIR} -name '*.log' -mtime +0 -exec compress {} \;</code><br/>
<code># Purge all of the logs older than a week</code><br/>
<code>find ${LOGDIR} -name '*.Z' -mtime +7 -exec rm -f {} \;</code><br/>
<code>EOF</code><br/></p>
</blockquote>
<p>These two commands will compress those files that are more than older
than a day and remove the compressed files after a week.</p>
<p>Add a crontab entry to run this everyday and you’re all set.</p>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_sysadmin.html'>sysadmin</a>, <a href='tag_logs.html'>logs</a>, <a href='tag_find.html'>find</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="vim-how-to-copy-amp-paste.html">
Vim: How to Copy &amp; Paste
</a></h3>
<!-- bashblog_timestamp: #202309152024.45# -->
<div class="subtitle">September 15, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>Most <em>Vim</em> tutorials and cheatsheets out there will cover how
to copy and paste. Pasting is the <em>easy</em> part. Let’s talk about
copying!</p>
<p><strong>Copying</strong></p>
<p>To copy the current line (line in which the cursor is placed), simply
press double lower <code>y</code> (<code>yy</code>) or single upper case
<code>y</code> (<code>Y</code>).</p>
<p><code>yy</code> or <code>Y</code>: copies/yanks the current line,
including the newline character at the end of the line.</p>
<p>To copy a specific number of lines under the cursor (beginning from
the current location of the cursor) simply precede the command with the
number of lines that you wish to copy, i.e., <code>Nyy</code> (where N
is the number of lines).</p>
<p>You can also use the following operation to copy two lines:</p>
<blockquote>
<p><code>:.,+yank</code><br/></p>
</blockquote>
<p>where the dot (.) refers to the current line and plus sign (+) means
plus one line below the cursor.</p>
<p>So, in order to use this syntax to copy 3 lines, use <code>3yy</code>
or <code>:.,+2yank</code> will work.</p>
<p>You can also copy a specific number of lines <em>above</em> the
cursor From the current cursor location use <code>yN-1k</code>, where
<code>N-1</code> is the number of lines you want to copy. So, to copy
two lines from the current position of the cursor, press (in normal
mode, or escape mode), <code>y2-1k</code>, or <code>y1k</code>.</p>
<p>To copy 5 lines above the current cursor position:</p>
<blockquote>
<p><code>y4k</code><br/></p>
</blockquote>
<p>You can also use other operations. for example, to copy only the
fifth line just above the cursor:</p>
<p><strong>Copying &amp; Pasting</strong></p>
<blockquote>
<p><code>:-4yank</code><br/></p>
</blockquote>
<p>You can can copy lines and paste them right above the cursor in one
shot using the operation <code>:Nt-</code>, where <code>N</code> is the
line number you want to copy.</p>
<p>You can can copy specific line number and paste right below the
cursor directly using the operation <code>:Nt.</code>, where
<code>N</code> is the line number you want to copy.</p>
<p>For example, to copy line two and paste just above the current cursor
position;</p>
<blockquote>
<p><code>:2t-</code><br/></p>
</blockquote>
<p>To copy line two and paste just below the current cursor
position;</p>
<blockquote>
<p><code>:2t.</code><br/></p>
</blockquote>
<p>The above commands also work with a range of lines rather than a
single line, such as <code>:4,7t.</code> will yank lines 4-7 and paste
them below the cursor.</p>
<p><strong>Pasting</strong></p>
<p><code>p</code> or <code>P</code>: pastes one or more lines, basically
whatever is in the buffer, under or above the cursor respectively.</p>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_vim.html'>vim</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="format-disk-using-exfat-on-command-line32603.html">
Format Disk using exFat on Command Line
</a></h3>
<!-- bashblog_timestamp: #202309142037.01# -->
<div class="subtitle">September 14, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>You may not always be working on a Linux system using a GUI, like a
server or a system with very low resources. Sometimes you may need to
format a disk to exFat using the Command Line. It’s not really that
difficult.</p>
<p>The first thing you need to do is to know which device is to be
formatted so before you connect the disk or USB make sure you run the
<code>lsblk</code> command before and after doing so. This way you will
be certain not to format the wrong disk by mistake and cause a data
loss.</p>
<p>Run <code>lsblk</code> before inserting the disk:</p>
<pre><code># lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda      8:0    0 232.9G  0 disk 
├─sda1   8:1    0   630M  0 part /boot/efi
├─sda2   8:2    0 216.3G  0 part /
└─sda3   8:3    0  15.9G  0 part [SWAP]
sdb      8:16   0   1.4T  0 disk 
├─sdb1   8:17   0   630M  0 part 
├─sdb2   8:18   0 244.1G  0 part /mnt/lfs
├─sdb3   8:19   0   1.1T  0 part /home
└─sdb4   8:20   0  15.6G  0 part 
sdc      8:32   1     0B  0 disk 
sr0     11:0    1  1024M  0 rom  </code></pre>
<p>Then insert the disk and run <code>lsblk</code> again:</p>
<pre><code># lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINTS
sda      8:0    0 232.9G  0 disk 
├─sda1   8:1    0   630M  0 part /boot/efi
├─sda2   8:2    0 216.3G  0 part /
└─sda3   8:3    0  15.9G  0 part [SWAP]
sdb      8:16   0   1.4T  0 disk 
├─sdb1   8:17   0   630M  0 part 
├─sdb2   8:18   0 244.1G  0 part /mnt/lfs
├─sdb3   8:19   0   1.1T  0 part /home
└─sdb4   8:20   0  15.6G  0 part 
sdc      8:32   1     0B  0 disk 
sdd      8:48   1 979.8M  0 disk  &lt;--+
├─sdd1   8:49   1    50M  0 part  &lt;--|--New device
└─sdd2   8:50   1 928.8M  0 part  &lt;--+
sr0     11:0    1  1024M  0 rom  </code></pre>
<p>Compare the output and you’ll see that in this case, the device
inserted was <code>/dev/sdd</code>.</p>
<p>Armed with that information, we can now begin our task. Start by
invoking <code>parted</code> with the <code>-a optimal</code> option to
specify the <em>optimal</em> alignment type:</p>
<pre><code>root@slacker:~# parted -a optimal /dev/sdd
GNU Parted 3.4
Using /dev/sdd
Welcome to GNU Parted! Type &#39;help&#39; to view a list of commands.</code></pre>
<p>Next, set the partition table to <em>gpt</em>:</p>
<pre><code>(parted) mktable gpt                                                      
Warning: The existing disk label on /dev/sdd will be destroyed and all data on
this disk will be lost. Do you want to continue?
Yes/No? Yes</code></pre>
<p>Now, create a new partition table of exFAT type:</p>
<pre><code>(parted) mkpart exFAT 0% -1                                               </code></pre>
<p>Set the flag for the first partition to <em>msftdata</em>:</p>
<pre><code>(parted) set 1 msftdata on
(parted) align-check opt 1
1 aligned
(parted) quit                                                             
Information: You may need to update /etc/fstab.</code></pre>
<p>Now you should be done. Let’s print out the partition to make sure
everything is OK:</p>
<pre><code># parted /dev/sdd print
Model: SanDisk U3 Cruzer Micro (scsi)
Disk /dev/sdd: 1027MB
Sector size (logical/physical): 512B/512B
Partition Table: gpt
Disk Flags: 

Number  Start   End     Size    File system  Name   Flags
 1      1049kB  1027MB  1026MB  fat32        exFAT  msftdata</code></pre>
<p>Now we can format it:</p>
<pre><code># mkfs.exfat -n exFAT /dev/sdd1
exfatprogs version : 1.1.3
Creating exFAT filesystem(/dev/sdd1, cluster size=32768)

Writing volume boot record: done
Writing backup volume boot record: done
Fat table creation: done
Allocation bitmap creation: done
Upcase table creation: done
Writing root directory entry: done
Synchronizing...

exFAT format complete!
# </code></pre>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_exfat.html'>exfat</a>, <a href='tag_parted.html'>parted</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="find-your-external-ip-address16428.html">
Find Your External IP Address
</a></h3>
<!-- bashblog_timestamp: #202309131901.42# -->
<div class="subtitle">September 13, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>It’s easy to find your internal IP address my using tools like
ifconfig or ip a but to find your external IP address (the one that
connects you to the outside world) you must use other means. Here are 3
simple commands that you can use to do just that:</p>
<blockquote>
<p><code>$ curl ifcfg.me</code><br/> <code>72.76.yyy.xxx</code><br/>
<code></code><br/> <code>$ curl icanhazip.com</code><br/>
<code>72.76.yyy.xxx</code><br/> <code></code><br/>
<code>$ nslookup myip.opendns.com. resolver1.opendns.com</code><br/>
<code>Server:      resolver1.opendns.com</code><br/>
<code>Address: 208.67.222.222#53</code><br/> <code></code><br/>
<code>Non-authoritative answer:</code><br/>
<code>Name:    myip.opendns.com</code><br/>
<code>Address: 72.76.yyy.xxx</code><br/></p>
</blockquote>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_network.html'>network</a>, <a href='tag_curl.html'>curl</a>, <a href='tag_nslookup.html'>nslookup</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="vim-underlining-a-line32649.html">
Vim: Underlining a Line
</a></h3>
<!-- bashblog_timestamp: #202309121720.17# -->
<div class="subtitle">September 12, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>Of course, Vim is <em>just</em> a text editor but you can
<em>underline</em> a line using a set of keystrokes that copies the
string to be underlined to the next line and then replaces the string
with hyphens using this set of Vim commands: <code>YpVr-</code></p>
<p>So if you have a line:</p>
<blockquote>
<p><code>This Is My Page Title</code><br/></p>
</blockquote>
<p>just position the cursor at the start of that line and enter the
abovementioned commands and it will turn it into:</p>
<blockquote>
<p><code>This Is My Page Title</code><br/>
<code>---------------------</code><br/></p>
</blockquote>
<p>This would save you a few keystrokes if you use Vim for creating a
lot of text documentation and use hyphens a lot in your section
headers.</p>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_vim.html'>vim</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<h3><a class="ablack" href="finding-duplicate-files-in-a-directory-tree.html">
Finding Duplicate Files in a Directory Tree
</a></h3>
<!-- bashblog_timestamp: #202309111700.57# -->
<div class="subtitle">September 11, 2023 &mdash; 
Gregg Szumowski
</div>
<!-- text begin -->
<p>Sometimes I need to find all of the duplicate files in a directory
tree. I have this issue all of the time when I move my music collection.
Here is a nifty script to sort these things out:</p>
<blockquote>
<p><code>#!/bin/bash</code><br/>
<code>find -not -empty -type f -printf "%s\n" | sort -rn | uniq -d | xargs -I{} -n1 find -type f -size {}c -print0 | xargs -0 md5sum | sort | uniq -w32 -D --all-repeated=separate</code><br/></p>
</blockquote>
<p>If you pipe the output of the above into a text file, for example,
<code>duplicates.txt</code>, you can then create a script from that:</p>
<blockquote>
<p><code>awk '{$1="";printf("rm \"%s\"\n",$0);}' ~/duplicates.txt &gt;~/duplicates.sh</code><br/></p>
</blockquote>
<p>Then edit the file and <strong>remove the lines for the files you
want to keep</strong>, make the script executable and run it. Done.</p>
<p>Tags: <a href='tag_cli.html'>cli</a>, <a href='tag_duplicates.html'>duplicates</a>, <a href='tag_find.html'>find</a>, <a href='tag_awk.html'>awk</a>, <a href='tag_motd.html'>motd</a></p>
<!-- text end -->
<div id="all_posts"><a href="all_posts.html">View more posts</a> &mdash; <a href="all_tags.html">All tags</a> &mdash; <a href="feed.rss">Subscribe</a></div>
</div>
<div id="footer">CC by-nc-nd <a href="http://twitter.com/gszumo">Gregg Szumowski</a> &mdash; <a href="mailto:gszumo[at]gmail[dot]com">gszumo[at]gmail[dot]com</a> &mdash; <a rel="me" href="https://mastodon.sdf.org/@gszumo">Mastodon</a><br/>
NOTE: All tips provided are USE AT YOUR OWN RISK. It is suggested that you read and test each tip in a non-volitile environment before placing into production.<br/>
Generated with <a href="https://github.com/cfenollosa/bashblog">bashblog</a>, a single bash script to easily create blogs like this one</div>
</div></div>
</body></html>
