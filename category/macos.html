<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Gregg Szumowski | articles in the "macOS" category</title>
    <link rel="shortcut icon" type="image/png" href="https://gszumo.github.io/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="https://gszumo.github.io/favicon.ico">
    <link href="https://gszumo.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Gregg Szumowski Full Atom Feed" />
    <link href="https://gszumo.github.io/feeds/%s.atom.xml" type="application/atom+xml" rel="alternate" title="Gregg Szumowski Categories Atom Feed" />
    <link rel="stylesheet" href="https://gszumo.github.io/theme/css/screen.css" type="text/css" />
    <link rel="stylesheet" href="https://gszumo.github.io/theme/css/pygments.css" type="text/css" />
    <link rel="stylesheet" href="https://gszumo.github.io/theme/css/print.css" type="text/css" media="print" />
    <meta name="generator" content="Pelican" />
    <meta name="description" content="" />
    <meta name="author" content="Gregg Szumowski" />
</head>
<body>
    <header>
        <nav>
            <ul>

                <li class="ephemeral selected"><a href="https://gszumo.github.io/category/macos.html">macOS</a></li>
                <li><a href="https://gszumo.github.io/">Home</a></li>
            </ul>
        </nav>
        <div class="header_box">
            <h1><a href="https://gszumo.github.io/">Gregg Szumowski</a></h1>
        </div>
    </header>
    <div id="wrapper">
        <div id="content">            <h4 class="date">Jun 20, 2019</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/xhyve-installing-and-configuration.html" rel="bookmark" title="Permanent Link to &quot;"xhyve Installing and Configuration"&quot;">"xhyve Installing and Configuration"</a>
                </h2>

                
                

                <p>Recently, I've been trying to improve the performance of virtualization on my 2012 MacBook Pro. I've heard about a virtualization tool called bhyve on FreeBSD and understood that it was being ported to macOS. I found this article, <a href="https://dan.langille.org/2018/10/02/running-freebsd-on-osx-using-xhyve-a-port-of-bhyve/">Running FreeBSD on OSX using xhyve, a port of bhyve</a> on Dan Langille's blog and decided to have a go at installing it.</p>
<p>At first I just figured that I would check if it could be installed via Homebrew and to my surprise I found that I had already installed it quite some time ago. So the next thing was to see if I could get it to work. I checked Homebrew to see if there were any other package available that would offer me some sort of GUI for xhyve, but unfortunately the only other package available was related to a driver for Docker. That's OK though, since I like using the command line better for these situations because you really get a better understanding of how the tool really works that way. So I commenced work.</p>
<p>I decided to start with Langille's scripts to see if I could get FreeBSD up and running.</p>
<ul>
<li>Download the latest FreeBSD 12.0 ISO file</li>
<li>Create an image (img file) to be used as the target drive</li>
<li>Use Langille's first script to install the ISO to the img file</li>
<li>Convert the installation script to a run script</li>
</ul>
<p>Seems simple enough. But....</p>
<p>I downloaded the FreeBSD ISO image from freebsd.org as instructed. He used an older version but I wanted to use the latest. Who can argue with that?</p>
<p>Step 1. <a href="https://download.freebsd.org/ftp/releases/amd64/amd64/ISO-IMAGES/12.0/">Download FreeBS from here</a></p>
<p>Step 2. Create the target image:</p>
<div class="highlight"><pre><span></span>$ mkfile -nv 50g fbsd.img
fbsd.img <span class="m">53687091200</span> bytes
</pre></div>


<p>This is where you will be installing FreeBSD, so make sure that you create a image large enough for your needs. In my case I don't really need much space.</p>
<p>Step 3. Modify Langille's script to your needs.</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nv">BOOTVOLUME</span><span class="o">=</span><span class="s2">&quot;FreeBSD-12.0-RELEASE-amd64-disc1.iso&quot;</span>
<span class="nv">IMG</span><span class="o">=</span><span class="s2">&quot;fbsd.img&quot;</span>

<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;../build/Release:build:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>

../build/xhyve <span class="se">\</span>
    -A <span class="se">\</span>
    -m 2G <span class="se">\</span>
    -c <span class="m">2</span> <span class="se">\</span>
    -s <span class="m">0</span>:0,hostbridge <span class="se">\</span>
    -s <span class="m">2</span>:0,virtio-net <span class="se">\</span>
    -s <span class="m">3</span>:0,ahci-cd,<span class="nv">$BOOTVOLUME</span> <span class="se">\</span>
    -s <span class="m">4</span>:0,virtio-blk,<span class="nv">$IMG</span> <span class="se">\</span>
    -s <span class="m">31</span>,lpc <span class="se">\</span>
    -l com1,stdio <span class="se">\</span>
    -f fbsd,../test/userboot.so,<span class="nv">$BOOTVOLUME</span>,<span class="s2">&quot;&quot;</span>
</pre></div>


<p>Run your installation script:</p>
<div class="highlight"><pre><span></span>$ sudo ./xhyveinstall-freebsd.sh
</pre></div>


<p>You should now get a boot screen:</p>
<div class="highlight"><pre><span></span>______               ____   _____ _____
|  ____|             |  _ \ / ____|  __ \
| |___ _ __ ___  ___ | |_) | (___ | |  | |
|  ___| &#39;__/ _ \/ _ \|  _ &lt; \___ \| |  | |
| |   | | |  __/  __/| |_) |____) | |__| |
| |   | | |    |    ||     |      |      |
|_|   |_|  \___|\___||____/|_____/|_____/    ```                        `
                                           s` `.....---.......--.```   -/
+============Welcome to FreeBSD===========+ +o   .--`         /y:`      +.
|                                         |  yo`:.            :o      `+-
|  1. Boot Multi User [Enter]             |   y/               -/`   -o/
|  2. Boot [S]ingle User                  |  .-                  ::/sy+:.
|  3. [Esc]ape to loader prompt           |  /                     `--  /
|  4. Reboot                              | `:                          :`
|                                         | `:                          :`
|  Options:                               |  /                          /
|  5. [K]ernel: kernel (1 of 2)           |  .-                        -.
|  6. Configure Boot [O]ptions...         |   --                      -.
|                                         |    `:`                  `:`
|                                         |      .--             `--.
|                                         |         .---.....----.
+=========================================+
</pre></div>


<p>Complete the installation as you normally would for FreeBSD and return to the shell prompt. Then modify the installation script that you just ran and fix it so it becomes a run script:</p>
<div class="highlight"><pre><span></span><span class="ch">#!/bin/sh</span>

<span class="nv">IMG</span><span class="o">=</span><span class="s2">&quot;fbsd.img&quot;</span>
<span class="nv">PATH</span><span class="o">=</span><span class="s2">&quot;../build/Release:build:</span><span class="nv">$PATH</span><span class="s2">&quot;</span>

xhyve <span class="se">\</span>
    -A <span class="se">\</span>
    -m 2G <span class="se">\</span>
    -c <span class="m">2</span> <span class="se">\</span>
    -s <span class="m">0</span>:0,hostbridge <span class="se">\</span>
    -s <span class="m">2</span>:0,virtio-net <span class="se">\</span>
    -s <span class="m">4</span>:0,virtio-blk,<span class="nv">$IMG</span> <span class="se">\</span>
    -s <span class="m">31</span>,lpc <span class="se">\</span>
    -l com1,stdio <span class="se">\</span>
    -f fbsd,../test/userboot.so,<span class="nv">$IMG</span>,<span class="s2">&quot;&quot;</span>
</pre></div>


<p>Run your run script:</p>
<div class="highlight"><pre><span></span>$ sudo ./xhyverun-freebsd.sh
</pre></div>


<p>Congratulations! You're running FreeBSD under xhyve!</p>
<p>Next time: Ubuntu 18.04 under xhyve.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/xhyve-installing-and-configuration.html">posted at 21:34</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>            <h4 class="date">Oct 29, 2017</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/getting-file-info-from-the-macos-command-line.html" rel="bookmark" title="Permanent Link to &quot;"Getting File Info From the MacOS Command Line"&quot;">"Getting File Info From the MacOS Command Line"</a>
                </h2>

                
                

                <p>The mdls command lists file metadata. A sample below for a folder:
<img alt="alt text" src="/images/mdls-training-folder.png" title="Screen shot image"></p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/getting-file-info-from-the-macos-command-line.html">posted at 11:02</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>            <h4 class="date">May 31, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/create-a-usb-installer-for-os-x-el-capitan.html" rel="bookmark" title="Permanent Link to &quot;"Create a USB Installer for OS X El Capitan"&quot;">"Create a USB Installer for OS X El Capitan"</a>
                </h2>

                
                

                <p>Here's a command line method to create a USB installer for OS X El Capitan:</p>
<p>Requirements:
A blank USB drive that is at least 8GB in size.
The El Capitan installer, which you can download for free from the Apple App Store.
Steps:
Place the USB stick in you Mac. It will probably show up in the sidebar as "Untitled". Rename it to something more memorable by right-clicking (or 2 finger tap) on it and select "Rename..." from the dialog. In my example, I have renamed it to "ElCapitan" (without the quotes).
Open Terminal (or iTerm if you prefer that) and enter the following command changing the "/Volumes/ElCapitan" to "/Volumes/". Please note that this is a single command:</p>
<div class="highlight"><pre><span></span>$ sudo /Applications/Install<span class="se">\ </span>OS<span class="se">\ </span>X<span class="se">\ </span>El<span class="se">\ </span>Capitan.app/Contents/Resources/createinstallmedia --volume /Volumes/ElCapitan --applicationpath /Applications/Install<span class="se">\ </span>OS<span class="se">\ </span>X<span class="se">\ </span>El<span class="se">\ </span>Capitan.app --nointeraction
</pre></div>


<div class="highlight"><pre><span></span><span class="n">Password</span><span class="o">:</span>
<span class="n">Erasing</span> <span class="n">Disk</span><span class="o">:</span> <span class="mi">0</span><span class="o">%...</span> <span class="mi">10</span><span class="o">%...</span> <span class="mi">20</span><span class="o">%...</span> <span class="mi">30</span><span class="o">%...</span><span class="mi">100</span><span class="o">%...</span>
<span class="n">Copying</span> <span class="n">installer</span> <span class="n">files</span> <span class="n">to</span> <span class="n">disk</span><span class="o">...</span>
<span class="n">Copy</span> <span class="n">complete</span><span class="o">.</span>
<span class="n">Making</span> <span class="n">disk</span> <span class="n">bootable</span><span class="o">...</span>
<span class="n">Copying</span> <span class="n">boot</span> <span class="n">files</span><span class="o">...</span>
<span class="n">Copy</span> <span class="n">complete</span><span class="o">.</span>
<span class="n">Done</span><span class="o">.</span>
</pre></div>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/create-a-usb-installer-for-os-x-el-capitan.html">posted at 11:19</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>            <h4 class="date">Apr 01, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/eject-a-cddvd-on-a-mac.html" rel="bookmark" title="Permanent Link to &quot;"Eject a CD/DVD on a Mac"&quot;">"Eject a CD/DVD on a Mac"</a>
                </h2>

                
                

                <p>To eject a CD or DVD from the command line use:</p>
<div class="highlight"><pre><span></span>cdcontrol -f /dev/cd0 eject
</pre></div>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/eject-a-cddvd-on-a-mac.html">posted at 12:23</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>            <h4 class="date">Apr 01, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/set-mac-hostname.html" rel="bookmark" title="Permanent Link to &quot;"Set Mac Hostname"&quot;">"Set Mac Hostname"</a>
                </h2>

                
                

                <p>To set the host name of your Mac (in my case macbook-pro) in the command prompt, type the following command:</p>
<div class="highlight"><pre><span></span>$ sudo scutil --set HostName <span class="s2">&quot;macbook-pro&quot;</span>
$ sudo scutil --set LocalHostName <span class="s2">&quot;macbook-pro&quot;</span>
</pre></div>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/set-mac-hostname.html">posted at 12:21</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>            <h4 class="date">Apr 01, 2016</h4>

            <article class="post">
                <h2 class="title">
                    <a href="https://gszumo.github.io/reset-mac-launchpad.html" rel="bookmark" title="Permanent Link to &quot;"Reset Mac Launchpad"&quot;">"Reset Mac Launchpad"</a>
                </h2>

                
                

                <p>To reset the Mac LaunchPad to default enter the following:</p>
<div class="highlight"><pre><span></span>rm ~/Library/Application\ Support/Dock/*.db ; killall Dock
</pre></div>


<p>This will however put all of the Apple apps on the first page and all of your remaining apps will be sorted alphabetically on the remaining pages.</p>
                <div class="clear"></div>

                <div class="info">
                    <a href="https://gszumo.github.io/reset-mac-launchpad.html">posted at 12:19</a>
                    &nbsp;&middot;&nbsp;<a href="https://gszumo.github.io/category/macos.html" rel="tag">macOS</a>
                </div>
            </article>

            <div class="clear"></div>
            <footer>
                <p>
                <a href="https://github.com/jody-frankowski/blue-penguin">Blue Penguin</a> Theme
                &middot;
                Powered by <a href="http://getpelican.com">Pelican</a>
                &middot;
                <a href="https://gszumo.github.io/feeds/all.atom.xml" rel="alternate">Atom Feed</a>
            </footer>
        </div>
        <div class="clear"></div>
    </div>
</body>
</html>